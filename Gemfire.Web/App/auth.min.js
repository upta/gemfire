define(["require","exports","hubs/lobby","global"],function(n,t,i,r){function o(){return $.Deferred(function(n){var i=$.parseJSON($.cookie("gemfire.state")),r;t.user=i,i.registrationId?(r=i.registrationId,delete i.registrationId,$.cookie("gemfire.state",JSON.stringify(i),{path:"/",expires:30}),u.start(r).fail(function(){n.reject()}).done(function(t){i.userId=t.userId,n.resolve()})):n.reject()}).promise()}function s(){$.removeCookie("gemfire.state"),f.reload()}var e=function(){function n(){}return n}(),u,f;t.RegisteredClient=e,u=i,f=r,t.init=o,t.logout=s,t.user})