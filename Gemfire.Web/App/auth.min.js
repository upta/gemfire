define(["require","exports","hubs/lobby"],function(n,t,i){function f(){return $.Deferred(function(n){var i=$.parseJSON($.cookie("gemfire.state")),u;t.user=i,i.registrationId?(u=i.registrationId,delete i.registrationId,$.cookie("gemfire.state",JSON.stringify(i),{path:"/",expires:30}),r.start(u).fail(function(){n.reject()}).done(function(t){i.userId=t.userId,n.resolve()})):n.reject()}).promise()}function e(){$.removeCookie("gemfire.state"),location.reload(!0)}var u=function(){function n(){}return n}(),r;t.RegisteredClient=u,r=i,t.init=f,t.logout=e,t.user})